(this.webpackJsonp0xwriter=this.webpackJsonp0xwriter||[]).push([[0],{1014:function(e,t){},1015:function(e,t){},1029:function(e,t){},1049:function(e,t){},1119:function(e,t){},1121:function(e,t){},1128:function(e,t){},1129:function(e,t){},1148:function(e,t){},1216:function(e,t){},1219:function(e,t){},1305:function(e,t,n){},1306:function(e,t,n){},1308:function(e,t,n){},1628:function(e,t,n){},1629:function(e,t,n){},1630:function(e,t,n){},1631:function(e,t,n){},1632:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(761),s=n.n(a),c=n(1650),i=n(1664),o=n(7),d=n(12),l=n(0),u=n.n(l),b=n(59),j=n(762),p=n.n(j),h=n(798),x=new p.a({cacheProvider:!0,providerOptions:{walletconnect:{package:h.a,options:{infuraId:"acfb72864b664ceda557e72b7f666a13"}}},theme:"dark"}),f=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.connect();case 3:return t=e.sent,n=new b.a.providers.Web3Provider(t),r=n.getSigner(),e.next=8,r.getAddress();case 8:return a=e.sent,e.t0=Number,e.t1=b.a.utils,e.next=13,r.getBalance();case 13:return e.t2=e.sent,e.t3=e.t1.formatEther.call(e.t1,e.t2),s=(0,e.t0)(e.t3),e.next=18,r.getChainId();case 18:return c=e.sent,e.abrupt("return",{provider:t,injectedProvider:n,signer:r,address:a,balance:s,chainID:c});case 22:throw e.prev=22,e.t4=e.catch(0),console.log(e.t4),new Error(e.t4.message);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=!1,r=!1,null!==JSON.parse(localStorage.getItem("payload"))&&(localStorage.removeItem("payload"),n=!0),null!==JSON.parse(localStorage.getItem("lit-auth-signature"))&&(localStorage.removeItem("lit-auth-signature"),r=!0),e.next=7,x.clearCachedProvider();case 7:return t=!0,e.abrupt("return",{threadDBDisconnected:n,litDisconnected:r,walletDisconnected:t});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=n(218),O=n.n(y),w=n(22),g=n(792),v=(n(1637),n(1651)),k=n(793),N=n(795),C=n(1654),T=n(1666),S=n(794),D=n(774),P=new C.a,I=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new T.a(t,n),e.next=4,P.connect(r);case 4:return a=new g.a("https://ceramic-clay.3boxlabs.com"),s=new v.a({provider:P.getDidProvider(),resolver:Object(w.a)(Object(w.a)({},Object(N.a)(a)),Object(k.a)())}),e.next=8,s.authenticate();case 8:return a.did=s,c=new S.a({ceramic:a,model:D}),e.next=12,c.get("basicProfile");case 12:return i=e.sent,e.abrupt("return",{ceramicClient:a,did:s._id,store:c,basicProfile:i});case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),M=n(87),B=n(783),A=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="Welcome to 0xWriter! \n\nThe Ethereum address used by this application is: \n"+n+"\n\nBy signing this message, you authorize the current application to use the following app associated with the above address: \n"+"0xWriter"+"\n\nYour authentication status will be reset after 2 hours.",e.next=4,t.signMessage(a);case 4:return r=e.sent,s=b.a.utils.keccak256(r),c=s.replace("0x","").match(/.{2}/g).map((function(e){return b.a.BigNumber.from("0x"+e).toNumber()})),i=M.b.fromRawEd25519Seed(Uint8Array.from(c)),e.abrupt("return",i);case 11:throw e.prev=11,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(r=e.sent)){e.next=9;break}return a=r.threadDBClient,s=r.threadID,e.abrupt("return",{threadDBClient:a,threadID:s});case 9:return e.next=11,A(t,n);case 11:if(c=e.sent){e.next=14;break}throw Error("User identity is missing!");case 14:return e.next=16,Object(B.a)(c);case 16:return i=e.sent,localStorage.setItem("payload",JSON.stringify(i)),e.next=20,M.a.withUserAuth(i.userAuth);case 20:return o=e.sent,d=Uint8Array.from(i.threadID),e.abrupt("return",{threadDBClient:o,threadID:M.c.fromBytes(d)});case 23:e.next=29;break;case 25:throw e.prev=25,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=JSON.parse(localStorage.getItem("payload")))){e.next=12;break}if(!(new Date(t.userAuthExpiration).getTime()>Date.now())){e.next=9;break}return n=M.a.withUserAuth(t.userAuth),r=Uint8Array.from(t.threadID),e.abrupt("return",{threadDBClient:n,threadID:M.c.fromBytes(r)});case 9:throw new Error("Textile Auth Expired!");case 10:e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(r=e.sent)){e.next=16;break}return a=r.threadDBClient,s=r.threadID,c={address:t,did:n,deployedContractAddress:"",subscribedBy:[],subscribedTo:[]},i=new M.d("did").eq(n),e.next=10,a.find(s,"Users",i);case 10:if(!(e.sent.length<1)){e.next=14;break}return e.next=14,a.create(s,"Users",[c]);case 14:e.next=17;break;case 16:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 17:e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(n=e.sent)){e.next=13;break}return r=n.threadDBClient,a=n.threadID,s=new M.d("did").eq(t),e.next=9,r.find(a,"Users",s);case 9:return c=e.sent,e.abrupt("return",c[0]);case 13:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(n=e.sent)){e.next=13;break}return r=n.threadDBClient,a=n.threadID,s=new M.d("address").eq(t),e.next=9,r.find(a,"Users",s);case 9:return c=e.sent,e.abrupt("return",c[0]);case 13:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(t=e.sent)){e.next=12;break}return n=t.threadDBClient,r=t.threadID,e.next=8,n.find(r,"Users",{});case 8:return a=e.sent,e.abrupt("return",a);case 12:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(r=e.sent)){e.next=21;break}return a=r.threadDBClient,s=r.threadID,c=new M.d("did").eq(t),e.next=9,a.find(s,"Users",c);case 9:if(!((i=e.sent).length<1)){e.next=12;break}return e.abrupt("return");case 12:if((o=i[0]).deployedContractAddress!==n){e.next=15;break}return e.abrupt("return");case 15:return o.deployedContractAddress=n,e.next=18,a.save(s,"Users",[o]);case 18:return e.abrupt("return",e.sent);case 21:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 22:e.next=28;break;case 24:throw e.prev=24,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i,o,d,l,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,R();case 5:if(!(r=e.sent)){e.next=35;break}return a=r.threadDBClient,s=r.threadID,c=new M.d("did").eq(t),e.next=11,a.find(s,"Users",c);case 11:if(!((i=e.sent).length<1)){e.next=14;break}return e.abrupt("return");case 14:if(!0!==(o=i[0]).subscribedBy.includes(n)){e.next=17;break}return e.abrupt("return");case 17:return o.subscribedBy.push(n),e.next=20,a.save(s,"Users",[o]);case 20:return d=new M.d("did").eq(n),e.next=23,a.find(s,"Users",d);case 23:if(!((l=e.sent).length<1)){e.next=26;break}return e.abrupt("return");case 26:if(!0!==(b=l[0]).subscribedTo.includes(t)){e.next=29;break}return e.abrupt("return");case 29:return b.subscribedTo.push(t),e.next=32,a.save(s,"Users",[b]);case 32:return e.abrupt("return",e.sent);case 35:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 36:e.next=42;break;case 38:throw e.prev=38,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 42:case"end":return e.stop()}}),e,null,[[0,38]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a,s,c,i,o,d,l,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:if(!(r=e.sent)){e.next=33;break}return a=r.threadDBClient,s=r.threadID,c=new M.d("did").eq(t),e.next=9,a.find(s,"Users",c);case 9:if(!((i=e.sent).length<1)){e.next=12;break}return e.abrupt("return");case 12:if(!1!==(o=i[0]).subscribedBy.includes(n)){e.next=15;break}return e.abrupt("return");case 15:return o.subscribedBy=o.subscribedBy.filter((function(e){return e!==n})),e.next=18,a.save(s,"Users",[o]);case 18:return d=new M.d("did").eq(n),e.next=21,a.find(s,"Users",d);case 21:if(!((l=e.sent).length<1)){e.next=24;break}return e.abrupt("return");case 24:if(!1!==(b=l[0]).subscribedTo.includes(t)){e.next=27;break}return e.abrupt("return");case 27:return b.subscribedTo=b.subscribedTo.filter((function(e){return e!==t})),e.next=30,a.save(s,"Users",[b]);case 30:return e.abrupt("return",e.sent);case 33:throw new Error("ThreadDB credentials not found! Reconnect your wallet.");case 34:e.next=40;break;case 36:throw e.prev=36,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(t,n){return e.apply(this,arguments)}}(),J=n(188),H=n(785),L=n.p+"static/media/Group 19@3x.0d91ea83.png",V=(n(1305),n(797)),Y=n(786),G=n(1661),Z=n(1655),Q=n(796),X=n(1649),$=n(1663),ee=n(191),te=n.n(ee),ne=(n(1306),n(1658)),re=n(1644),ae=n(1645),se=n(1659),ce=n(1646),ie=n(1648),oe=n(1660),de=n(2),le=function(e){var t=e.wallet,n=e.ceramic,a=e.handleRerender,s=e.handleMessage,c=Object(ne.a)(),i=c.setVisible,l=c.bindings,b=Object(r.useState)(),j=Object(d.a)(b,2),p=j[0],h=j[1],x=Object(r.useState)(),f=Object(d.a)(x,2),m=f[0],y=f[1],O=Object(r.useState)(),g=Object(d.a)(O,2),v=g[0],k=g[1],N=Object(r.useState)(!1),C=Object(d.a)(N,2),T=C[0],S=C[1],D=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=5;break}s("warning","Please enter name."),e.next=23;break;case 5:if(m){e.next=9;break}s("warning","Please enter description."),e.next=23;break;case 9:if(v){e.next=13;break}s("warning","Please enter emoji."),e.next=23;break;case 13:return S(!0),e.next=16,n.store.set("basicProfile",{name:p,description:m,emoji:v});case 16:S(!1),s("success","Basic Profile successfully updated."),h(""),y(""),k(""),i(!1),a(!0);case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0),S(!1),s("error",e.t0.message);case 30:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}(),P=function(){return Object(de.jsx)(re.a,Object(w.a)(Object(w.a)({},l),{},{width:"360px",children:Object(de.jsxs)("div",{className:"modal-content",children:[Object(de.jsx)(ae.a,{clearable:!0,label:"Name",value:p,onChange:function(e){return h(e.target.value)},width:"100%"}),Object(de.jsx)(ae.a,{clearable:!0,label:"Description",value:m,onChange:function(e){return y(e.target.value)},width:"100%"}),Object(de.jsx)(ae.a,{clearable:!0,label:"Emoji",value:v,onChange:function(e){return k(e.target.value)},width:"100%"}),T?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,scale:.8,width:"100%",children:"Update Profile"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,scale:.8,width:"100%",onClick:D,children:"Update Profile"})]})}))};return Object(r.useEffect)((function(){void 0!==n.basicProfile&&null!==n.basicProfile&&(h(n.basicProfile.name),y(n.basicProfile.description),k(n.basicProfile.emoji))}),[]),Object(de.jsxs)("div",{className:"home-content",children:[Object(de.jsx)(se.a,{title:"User",content:Object(de.jsx)(ce.a,{shadow:!0,width:"fit-content",children:Object(de.jsxs)("div",{className:"user",children:[Object(de.jsxs)("div",{className:"user-identicon-profile",children:[Object(de.jsx)("div",{className:"user-identicon",children:Object(de.jsx)(te.a,{string:t.address,bg:"#eef",size:"40"})}),void 0!==n.basicProfile?Object(de.jsxs)("div",{className:"user-basic-profile",children:[Object(de.jsx)("div",{className:"user-name",children:null!==n.basicProfile&&n.basicProfile.name?Object(de.jsx)(Z.a,{b:!0,children:n.basicProfile.name}):Object(de.jsx)(Z.a,{children:"--"})}),Object(de.jsx)("div",{className:"user-description",children:Object(de.jsx)(Z.a,{children:null!==n.basicProfile&&n.basicProfile.description?n.basicProfile.description:"--"})}),Object(de.jsx)("div",{className:"user-emoji",children:Object(de.jsx)(Z.a,{children:null!==n.basicProfile&&n.basicProfile.emoji?n.basicProfile.emoji:"--"})})]}):null]}),Object(de.jsxs)("div",{className:"user-address-did",children:[Object(de.jsx)("div",{className:"user-did",children:Object(de.jsx)(ie.a,{symbol:"DID",text:n.did,width:"400px",copy:"prevent"})}),Object(de.jsx)("div",{className:"user-address",children:Object(de.jsx)(ie.a,{type:"lite",symbol:"Address",text:t.address,width:"400px"})})]})]})})}),Object(de.jsx)(se.a,{title:"Balance",content:"".concat(t.balance," MATIC")}),Object(de.jsx)(se.a,{title:"Network",content:Object(de.jsx)(oe.a,{type:"lite",children:"Mumbai Testnet"})}),(void 0===n.basicProfile||null!==n.basicProfile)&&(void 0===n.basicProfile||null===n.basicProfile||void 0!==n.basicProfile.name&&""!==n.basicProfile.name||void 0!==n.basicProfile.description&&""!==n.basicProfile.description||void 0!==n.basicProfile.emoji&&""!==n.basicProfile.emoji)?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,scale:.8,className:"update-profile-btn",onClick:function(){return i(!0)},children:"Update Profile"}),P()]}):Object(de.jsxs)("div",{className:"profile-not-found",children:[Object(de.jsx)(G.a,{width:"fit-content",marginTop:"0",marginBottom:"1",label:"Note ",children:"Basic Profile not found, update now."}),Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,scale:.8,auto:!0,onClick:function(){return i(!0)},children:"Update Profile"}),P()]})]})},ue=n(40),be=n(787),je=n.n(be),pe=n(788),he=n.n(pe),xe=n(789),fe=n.n(xe),me=n(790),ye=n.n(me),Oe=n(791),we=n.n(Oe),ge=n(93),ve=n(194),ke=n.n(ve),Ne=function(e){var t=[];return e.map((function(e){switch(e.type){case"header":switch(e.data.level){case 1:t.push(Object(de.jsx)(Z.a,{h1:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case 2:t.push(Object(de.jsx)(Z.a,{h2:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case 3:t.push(Object(de.jsx)(Z.a,{h3:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case 4:t.push(Object(de.jsx)(Z.a,{h4:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case 5:t.push(Object(de.jsx)(Z.a,{h5:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case 6:t.push(Object(de.jsx)(Z.a,{h6:!0,children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id))}break;case"paragraph":t.push(Object(de.jsx)(Z.a,{children:Object(de.jsx)("span",{dangerouslySetInnerHTML:{__html:ke.a.sanitize(e.data.text)}})},e.id));break;case"delimiter":t.push(Object(de.jsx)("div",{className:"ce-delimiter"},e.id));break;default:console.log("Unknown block type",e.type)}})),t},Ce=function(e){return new Date(e).toDateString()},Te=(n(1308),n(1647)),Se=n(195),De=function(e){var t=e.wallet,n=e.ceramic,a=e.writer,s=e.authSig,c=e.handleRerender,i=e.handleMessage,l=Object(V.a)({placement:"bottomRight",padding:"1rem"}).setToast,b=Object(r.useState)(!1),j=Object(d.a)(b,2),p=j[0],h=j[1],x=Object(r.useState)(),f=Object(d.a)(x,2),m=f[0],y=f[1],O=Object(r.useState)(),w=Object(d.a)(O,2),g=(w[0],w[1]),v=Object(r.useState)(),k=Object(d.a)(v,2),N=(k[0],k[1]),C=Object(r.useState)([]),T=Object(d.a)(C,2),S=T[0],D=T[1],P=Object(r.useState)(!1),I=Object(d.a)(P,2),M=I[0],B=I[1],A=Object(r.useState)(!1),E=Object(d.a)(A,2),R=E[0],W=E[1],U=Object(r.useState)(),F=Object(d.a)(U,2),_=F[0],K=F[1],q=Object(r.useState)(!1),z=Object(d.a)(q,2),J=z[0],H=z[1],L=Object(r.useRef)(),Q=function(e,n){var r=new je.a({holder:"new"===e?"newEditor":"edit"===e?"editEditor":"editorjs",logLevel:"ERROR",data:n&&void 0!==n.data?n.data:n,onReady:function(){L.current=r},onChange:function(){var a=Object(o.a)(u.a.mark((function a(){var s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.saver.save();case 2:s=a.sent,console.log(s),"new"===e?window.localStorage.setItem("editorDraft-new-".concat(t.address),JSON.stringify(s)):"edit"===e&&window.localStorage.setItem("editorDraft-".concat(n.id,"-").concat(t.address),JSON.stringify(s));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),autofocus:!1,tools:{header:{class:he.a,inlineToolbar:!0},paragraph:{class:we.a,inlineToolbar:!0,config:{placeholder:"Tell your story..."}},delimiter:fe.a,marker:ye.a}})},X=function(e,n){if(W(!0),"new"===e){var r=window.localStorage.getItem("editorDraft-new-".concat(t.address));null===r?Q(e):Q(e,JSON.parse(r))}else if("edit"===e){var a=window.localStorage.getItem("editorDraft-".concat(n.id,"-").concat(t.address));Q(e,null===a?n:JSON.parse(a))}},$=function(){W(!1)},ee=function(e){if("new"===e)null!==window.localStorage.getItem("editorDraft-new-".concat(t.address))&&(window.localStorage.removeItem("editorDraft-new-".concat(t.address)),L.current.clear());else if("edit"===e){null!==window.localStorage.getItem("editorDraft-".concat(_,"-").concat(t.address))&&(window.localStorage.removeItem("editorDraft-".concat(_,"-").concat(t.address)),$())}},te=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(t.id),X("edit",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(o.a)(u.a.mark((function e(r){var a,o,d,l,b,j,p,h,x,f,y,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"new"===r?null!==(o=window.localStorage.getItem("editorDraft-new-".concat(t.address)))&&(a=JSON.parse(o)):"edit"===r&&null!==(d=window.localStorage.getItem("editorDraft-".concat(_,"-").concat(t.address)))&&(a=JSON.parse(d)),0!==a.blocks.length){e.next=6;break}i("warning","Cannot publish empty posts."),e.next=26;break;case 6:return H(!0),l=Object(ue.a)(S),"new"===r?(b={id:l.length+1,data:a},l.push(b)):"edit"===r&&(j={id:Number(_),data:a},p=l.filter((function(e){return e.id===Number(_)})),h=l.indexOf(p[0]),l[h]=j),e.next=11,Object(ge.b)(JSON.stringify(l),m,s);case 11:return x=e.sent,f=x.encryptedPosts,y=x.encryptedSymmetricKey,e.next=16,Object(ge.d)(f);case 16:return O=e.sent,e.next=19,n.store.merge("writerData",{encryptedPosts:[O]});case 19:return e.next=21,n.store.merge("writerData",{encryptedSymmetricKey:[y]});case 21:H(!1),"new"===r?i("success","New post successfully published!"):"edit"===r&&i("success","Post successfully edited!"),("new"===r||"edit"===r)&&ee(r),K(0),c(!0);case 26:e.next=33;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0),H(!1),i("error",e.t0.message);case 33:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(o.a)(u.a.mark((function e(r){var a,o,d,l,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i("success","Deleting post..."),null!==window.localStorage.getItem("editorDraft-".concat(_,"-").concat(t.address))&&window.localStorage.removeItem("editorDraft-".concat(_,"-").concat(t.address)),a=(a=Object(ue.a)(S)).filter((function(e){return e.id!==r.id})),e.next=8,Object(ge.b)(JSON.stringify(a),m,s);case 8:return o=e.sent,d=o.encryptedPosts,l=o.encryptedSymmetricKey,e.next=13,Object(ge.d)(d);case 13:return b=e.sent,e.next=16,n.store.merge("writerData",{encryptedPosts:[b]});case 16:return e.next=18,n.store.merge("writerData",{encryptedSymmetricKey:[l]});case 18:i("success","Post successfully deleted!"),K(0),c(!0),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0),i("error",e.t0.message);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var r,c,o,d,l,b,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0===a){e.next=21;break}return e.next=4,a.getHasWriterDeployed(t.address);case 4:if(!e.sent){e.next=21;break}return h(!0),e.next=9,n.store.get("writerData",n.did);case 9:if(void 0===(r=e.sent)||null===r){e.next=21;break}if(r.accessControlConditions&&(c=r.accessControlConditions[0],o=c[0].returnValueTest.value,Number(o)>0&&(y(c),B(!0))),r.encryptedSymmetricKey&&(d=r.encryptedSymmetricKey[0],g(d)),r.encryptedPosts&&(l=r.encryptedPosts[0],N(l)),!(r.accessControlConditions&&r.encryptedSymmetricKey&&r.encryptedPosts)){e.next=21;break}if(!(r.encryptedPosts[0]&&r.encryptedSymmetricKey[0]&&r.accessControlConditions[0])){e.next=21;break}return b=Object(ge.c)(r.encryptedPosts[0]),e.next=19,Object(ge.a)(b,r.encryptedSymmetricKey[0],r.accessControlConditions[0],s);case 19:j=e.sent,D(JSON.parse(j.decryptedPosts));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0),i("error",e.t0.message);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){L.current&&(L.current.destroy(),L.current=null)}}),[]),Object(de.jsx)("div",{className:"writer-content",children:p?p&&!M?Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(G.a,{width:"fit-content",label:"Note ",children:["To start writing your blog, you must set an access control condition i.e, set a minimum no. of your tokens a user must own in order to read your blog. To do that, head over to ",Object(de.jsx)("b",{children:"Access Control"})," section."]})}):p&&M?Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(Te.a.Group,{value:"New",onChange:function(e){"New"===e||$()},children:[Object(de.jsx)(Te.a,{label:"New",children:R?R?Object(de.jsxs)("div",{className:"editor-open-section",children:[Object(de.jsxs)("div",{className:"close-editor-btn",children:[Object(de.jsx)(Se.ChevronsDown,{}),Object(de.jsx)(Y.a,{type:"secondary",ghost:!0,auto:!0,marginRight:"2.8",onClick:function(){return $()},children:"Close Editor"})]}),Object(de.jsx)("div",{id:"newEditor"}),Object(de.jsxs)("div",{className:"delete-and-save-btns",children:[Object(de.jsx)(Y.a,{type:"error",ghost:!0,onClick:function(){return ee("new")},auto:!0,children:"delete"}),J?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,auto:!0,children:"Publish"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,onClick:function(){return ne("new")},auto:!0,children:"Publish"})]})]}):null:Object(de.jsx)("div",{className:"editor-close-section",children:Object(de.jsxs)("div",{className:"open-editor-btn",children:[Object(de.jsx)(Se.ChevronsRight,{}),Object(de.jsx)(Se.ChevronsRight,{}),Object(de.jsx)(Se.ChevronsRight,{}),Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,auto:!0,marginRight:"2.8",onClick:function(){return X("new")},children:"Open Editor"})]})})}),Object(de.jsx)(Te.a,{label:"My Posts",paddingBottom:"1",children:0===S.length?Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(G.a,{width:"fit-content",label:"Note ",children:["You have not published any posts yet. To publish your first post, head over to ",Object(de.jsx)("b",{children:"New"})," section."]})}):S.length>0&&!R?Object(de.jsx)("div",{className:"all-posts",children:S.map((function(e){return Object(de.jsxs)(ce.a,{shadow:!0,width:"95%",children:[Object(de.jsx)(ce.a.Content,{children:Ne(e.data.blocks)}),Object(de.jsx)(ce.a.Footer,{children:Object(de.jsxs)("div",{className:"card-footer",children:[Object(de.jsx)("div",{className:"footer-text",children:Object(de.jsx)(Z.a,{i:!0,children:Ce(e.data.time)})}),Object(de.jsxs)("div",{className:"footer-icons",children:[Object(de.jsx)(Se.Edit,{className:"edit-icon",onClick:function(){return te(e)}}),Object(de.jsx)(Se.Trash,{className:"delete-icon",color:"red",onClick:function(){return function(e){return l({text:"Are you sure you want to delete the post?",type:"error",actions:[{name:"Delete",handler:function(){return re(e)}}]})}(e)}})]})]})})]},e.id)}))}):Object(de.jsxs)("div",{className:"editor-open-section",children:[Object(de.jsxs)("div",{className:"close-editor-btn",children:[Object(de.jsx)(Se.ChevronsDown,{}),Object(de.jsx)(Y.a,{type:"secondary",ghost:!0,auto:!0,marginRight:"2.8",onClick:function(){return $()},children:"Close Editor"})]}),Object(de.jsx)("div",{id:"editEditor"}),Object(de.jsxs)("div",{className:"delete-and-save-btns",children:[Object(de.jsx)(Y.a,{type:"warning",ghost:!0,onClick:function(){return function(){null!==window.localStorage.getItem("editorDraft-".concat(_,"-").concat(t.address))&&window.localStorage.removeItem("editorDraft-".concat(_,"-").concat(t.address)),$(),L.current.destroy(),L.current=null;var e=S.filter((function(e){return e.id===Number(_)})),n=S.indexOf(e[0]),r=S[n];X("edit",r)}()},auto:!0,children:"Reset"}),J?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,auto:!0,children:"Publish"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,onClick:function(){return ne("edit")},auto:!0,children:"Publish"})]})]})})]})}):null:Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(G.a,{width:"fit-content",label:"Note ",children:["To start writing your blog, you must first deploy an ERC20 contract (WriterERC20) to create a token gated access to your blog. To do that, head over to ",Object(de.jsx)("b",{children:"My Contract"})," section."]})})})},Pe=(n(1628),n(1662)),Ie=n(476),Me=function(e){var t=e.wallet,n=e.ceramic,a=e.writer,s=e.handleRerender,c=e.handleMessage,i=Object(r.useState)(""),l=Object(d.a)(i,2),j=l[0],p=l[1],h=Object(r.useState)(""),x=Object(d.a)(h,2),f=x[0],m=x[1],y=Object(r.useState)(""),O=Object(d.a)(y,2),w=O[0],g=O[1],v=Object(r.useState)(""),k=Object(d.a)(v,2),N=k[0],C=k[1],T=Object(r.useState)(""),S=Object(d.a)(T,2),D=S[0],P=S[1],I=Object(r.useState)(!1),M=Object(d.a)(I,2),B=M[0],A=M[1],E=Object(r.useState)(),R=Object(d.a)(E,2),W=R[0],U=R[1],_=Object(r.useState)(""),K=Object(d.a)(_,2),H=K[0],L=K[1],V=Object(r.useState)(""),Z=Object(d.a)(V,2),Q=Z[0],X=Z[1],ee=Object(r.useState)(""),te=Object(d.a)(ee,2),ne=te[0],re=te[1],ce=Object(r.useState)(""),ie=Object(d.a)(ce,2),le=ie[0],ue=ie[1],be=Object(r.useState)(""),je=Object(d.a)(be,2),pe=je[0],he=je[1],xe=Object(r.useState)(""),fe=Object(d.a)(xe,2),me=fe[0],ye=fe[1],Oe=Object(r.useState)(""),we=Object(d.a)(Oe,2),ge=we[0],ve=we[1],ke=Object(r.useState)(),Ne=Object(d.a)(ke,2),Ce=Ne[0],Te=Ne[1],Se=Object(r.useState)(),De=Object(d.a)(Se,2),Me=De[0],Be=De[1],Ae=Object(r.useState)(),Ee=Object(d.a)(Ae,2),Re=Ee[0],We=Ee[1],Ue=Object(r.useState)(),Fe=Object(d.a)(Ue,2),_e=Fe[0],Ke=Fe[1],qe=Object(r.useState)(!1),ze=Object(d.a)(qe,2),Je=ze[0],He=ze[1],Le=Object(r.useState)(!1),Ve=Object(d.a)(Le,2),Ye=Ve[0],Ge=Ve[1],Ze=Object(r.useState)(!1),Qe=Object(d.a)(Ze,2),Xe=Qe[0],$e=Qe[1],et=Object(r.useState)(!1),tt=Object(d.a)(et,2),nt=tt[0],rt=tt[1],at=Object(r.useState)(!1),st=Object(d.a)(at,2),ct=st[0],it=st[1],ot=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j){e.next=5;break}c("warning","Please enter token name."),e.next=30;break;case 5:if(f){e.next=9;break}c("warning","Please enter token symbol."),e.next=30;break;case 9:if(w){e.next=13;break}c("warning","Please enter token price."),e.next=30;break;case 13:if(N){e.next=17;break}c("warning","Please enter no.of tokens."),e.next=30;break;case 17:return He(!0),e.next=20,a.deployWriterERC20Contract(n.did,j,f,b.a.utils.parseEther(w),Number(N),{value:D});case 20:return t=e.sent,e.next=23,t.wait();case 23:1===e.sent.status?(He(!1),c("success","Transaction successful!")):(He(!1),c("error","Transaction failed!")),p(""),m(""),g(""),C(""),s(!0);case 30:e.next=37;break;case 32:e.prev=32,e.t0=e.catch(0),console.log(e.t0),He(!1),c("error",e.t0.message);case 37:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(o.a)(u.a.mark((function e(){var r,a,i,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ce){e.next=5;break}c("warning","Please enter no. of tokens."),e.next=41;break;case 5:if(!(Number(Ce)<=0)){e.next=9;break}c("warning","No. of tokens should be atleast 1."),e.next=41;break;case 9:return Ge(!0),e.next=12,W.getTokenPrice();case 12:return r=e.sent,r=String(r*Ce),e.next=16,W.mint(Number(Ce),{value:r});case 16:return a=e.sent,e.next=19,a.wait();case 19:return 1===e.sent.status?(c("success","Transaction successful!"),c("success","Updating user on threadDB...")):(Ge(!1),c("error","Transaction failed!")),e.next=23,W.balanceOf(t.address);case 23:return i=e.sent,e.next=26,n.store.get("writerData",n.did);case 26:if(void 0===(o=e.sent)||null===o){e.next=37;break}if(null===o.accessControlConditions[0]){e.next=37;break}if(d=o.accessControlConditions[0][0].returnValueTest.value,!(Number(i)>=Number(d))){e.next=35;break}return e.next=33,q(n.did,n.did);case 33:e.next=37;break;case 35:return e.next=37,z(n.did,n.did);case 37:c("success","User updated on threadDB!"),Ge(!1),Te(""),s(!0);case 41:e.next=48;break;case 43:e.prev=43,e.t0=e.catch(0),console.log(e.t0),Ge(!1),c("error",e.t0.message);case 48:case"end":return e.stop()}}),e,null,[[0,43]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=Object(o.a)(u.a.mark((function e(){var t,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Me){e.next=5;break}c("warning","Please enter transfer address."),e.next=49;break;case 5:if(b.a.utils.isAddress(Me)){e.next=9;break}c("warning","Please enter valid address."),e.next=49;break;case 9:if(Re){e.next=13;break}c("warning","Please enter no. of tokens"),e.next=49;break;case 13:if(!(Number(Re)<=0)){e.next=17;break}c("warning","No. of tokens should be atleast 1."),e.next=49;break;case 17:return $e(!0),e.next=20,W.transfer(Me,Number(Re));case 20:return t=e.sent,e.next=23,t.wait();case 23:return 1===e.sent.status?(c("success","Transaction successful!"),c("success","Updating user on threadDB...")):($e(!1),c("error","Transaction failed!")),e.next=27,W.balanceOf(Me);case 27:return r=e.sent,e.next=30,n.store.get("writerData",n.did);case 30:if(void 0===(a=e.sent)||null===a){e.next=44;break}if(null===a.accessControlConditions[0]){e.next=44;break}return i=a.accessControlConditions[0][0].returnValueTest.value,e.next=36,F(Me);case 36:if(o=e.sent,!(Number(r)>=Number(i))){e.next=42;break}return e.next=40,q(n.did,o.did);case 40:e.next=44;break;case 42:return e.next=44,z(n.did,o.did);case 44:c("success","User updated on threadDB!"),$e(!1),Be(""),We(""),s(!0);case 49:e.next=56;break;case 51:e.prev=51,e.t0=e.catch(0),console.log(e.t0),$e(!1),c("error",e.t0.message);case 56:case"end":return e.stop()}}),e,null,[[0,51]])})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_e){e.next=5;break}c("warning","Please enter new token price."),e.next=15;break;case 5:return rt(!0),e.next=8,W.setTokenPrice(b.a.utils.parseEther(_e));case 8:return t=e.sent,e.next=11,t.wait();case 11:1===e.sent.status?(rt(!1),c("success","Transaction successful!")):(rt(!1),c("error","Transaction failed!")),Ke(""),s(!0);case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),rt(!1),c("error",e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,it(!0),e.next=4,W.withdrawBalance();case 4:return t=e.sent,e.next=7,t.wait();case 7:1===e.sent.status?(it(!1),c("success","Transaction successful!")):(it(!1),c("error","Transaction failed!")),s(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),it(!1),c("error",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var n,r,s,c,i,o,d,l,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=50;break}return e.next=3,a.getDeploymentFee();case 3:return n=e.sent,P(n),e.next=7,a.getHasWriterDeployed(t.address);case 7:if(!e.sent){e.next=50;break}return A(!0),e.next=12,a.getWriterDeployedContractAddress(t.address);case 12:return r=e.sent,L(r),s=new b.a.Contract(r,J.writerERC20,t.signer),U(s),e.next=18,s.name();case 18:return c=e.sent,X(c),e.next=22,s.symbol();case 22:return i=e.sent,re(i),e.t0=b.a.utils,e.next=27,s.getTokenPrice();case 27:return e.t1=e.sent,e.t2=e.t0.formatEther.call(e.t0,e.t1),o=e.t2+" MATIC",ue(o),e.t3=Number,e.next=34,s.totalSupply();case 34:return e.t4=e.sent,d=(0,e.t3)(e.t4),he(d),e.t5=b.a.utils,e.next=40,s.getContractBalance();case 40:return e.t6=e.sent,e.t7=e.t5.formatEther.call(e.t5,e.t6),l=e.t7+" MATIC",ye(l),e.t8=Number,e.next=47,s.balanceOf(t.address);case 47:e.t9=e.sent,j=(0,e.t8)(e.t9),ve(j);case 50:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(de.jsx)("div",{className:"contract-content",children:B?Object(de.jsxs)("div",{className:"user-contract-content",children:[Object(de.jsxs)("div",{className:"reads",children:[Object(de.jsx)(se.a,{title:"Contract",content:H?Object(de.jsx)(Ie.a,{href:"https://mumbai.polygonscan.com/address/".concat(H),target:"_blank",icon:!0,style:{color:"#7B3FE4",fontWeight:"bold"},children:"Polygonscan"}):Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Name",content:Q||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Symbol",content:ne||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Price",content:le||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Total Minted",content:pe||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Your Token Balance",content:ge||0===ge?ge:Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Contract Balance",content:me||Object(de.jsx)(Pe.a,{})})]}),Object(de.jsxs)("div",{className:"writes",children:[Object(de.jsxs)("div",{className:"write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"No. of tokens: 1000",onChange:function(e){return Te(e.target.value)},width:"80%",children:"Mint New Tokens"}),Ye?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Mint"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",scale:.8,onClick:dt,children:"Mint"})]}),Object(de.jsxs)("div",{className:"write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"To Address: 0x0",onChange:function(e){return Be(e.target.value)},width:"80%",children:"Transfer Tokens"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"No.of tokens: 30",onChange:function(e){return We(e.target.value)},width:"80%"}),Xe?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Transfer"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",scale:.8,onClick:lt,children:"Transfer"})]}),Object(de.jsxs)("div",{className:"write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"Token Price: 0.003",onChange:function(e){return Ke(e.target.value)},width:"80%",children:"Set New Token Price (MATIC)"}),nt?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Change Price"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",scale:.8,onClick:ut,children:"Change Price"})]})]}),Object(de.jsx)("div",{className:"withdraw-balance",children:ct?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,auto:!0,scale:.8,children:"Widthdraw Balance"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,auto:!0,scale:.8,onClick:bt,children:"Widthdraw Balance"})})]}):Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(G.a,{width:"fit-content",label:"Note ",children:"To start writing your blog, you must first deploy an ERC20 contract (WriterERC20) to create a token gated access to your blog."}),Object(de.jsx)($.a,{h:3}),Object(de.jsx)(se.a,{title:"Deployment Fee",content:D?Object(de.jsx)(oe.a,{type:"lite",children:b.a.utils.formatEther(D)+" MATIC"}):Object(de.jsx)(Pe.a,{})}),Object(de.jsx)($.a,{h:2}),Object(de.jsxs)("div",{className:"contract-form",children:[Object(de.jsx)(ae.a,{value:"ERC20",readOnly:!0,type:"secondary",width:"50%",children:"Contract Type"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"Token",onChange:function(e){return p(e.target.value)},width:"50%",children:"Token Name"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"TKN",onChange:function(e){return m(e.target.value)},width:"50%",children:"Token Symbol"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"0.02",onChange:function(e){return g(e.target.value)},width:"50%",children:"Token Price (MATIC)"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"1000",onChange:function(e){return C(e.target.value)},width:"50%",children:"Initial Mint"}),Je?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,scale:.8,className:"btn",onClick:ot,children:"Deploy Contract"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,scale:.8,className:"btn",onClick:ot,children:"Deploy Contract"})]})]})})},Be=(n(1629),function(e){var t=e.wallet,n=e.ceramic,a=e.writer,s=e.handleRerender,c=e.handleMessage,i=Object(r.useState)(""),l=Object(d.a)(i,2),j=l[0],p=l[1],h=Object(r.useState)(""),x=Object(d.a)(h,2),f=x[0],m=x[1],y=Object(r.useState)(""),O=Object(d.a)(y,2),w=O[0],g=O[1],v=Object(r.useState)(""),k=Object(d.a)(v,2),N=k[0],C=k[1],T=Object(r.useState)(!1),S=Object(d.a)(T,2),D=S[0],P=S[1],I=Object(r.useState)(""),M=Object(d.a)(I,2),B=M[0],A=M[1],E=Object(r.useState)(""),R=Object(d.a)(E,2),W=R[0],U=R[1],_=Object(r.useState)(""),K=Object(d.a)(_,2),q=K[0],z=K[1],J=Object(r.useState)(""),H=Object(d.a)(J,2),L=H[0],V=H[1],G=Object(r.useState)(""),Q=Object(d.a)(G,2),X=Q[0],$=Q[1],ee=Object(r.useState)(!1),ne=Object(d.a)(ee,2),re=ne[0],oe=ne[1],le=Object(r.useState)(!1),ue=Object(d.a)(le,2),be=ue[0],je=ue[1],pe=Object(r.useState)(!1),he=Object(d.a)(pe,2),xe=he[0],fe=he[1],me=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,oe(!0),e.next=4,a.withdrawBalance();case 4:return t=e.sent,e.next=7,t.wait();case 7:1===e.sent.status?(oe(!1),c("success","Transaction successful!")):(oe(!1),c("error","Transaction failed!")),s(!0),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),oe(!1),c("error",e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q){e.next=5;break}c("warning","Please enter writer address."),e.next=24;break;case 5:if(b.a.utils.isAddress(q)){e.next=9;break}c("warning","Please enter valid address."),e.next=24;break;case 9:return e.next=11,a.getHasWriterDeployed(q);case 11:if(e.sent){e.next=16;break}c("warning","No contract deployed by this address."),e.next=24;break;case 16:return je(!0),$(""),e.next=20,a.getWriterDeployedContractAddress(q);case 20:t=e.sent,$(t),je(!1),z("");case 24:e.next=31;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0),je(!1),c("error",e.t0.message);case 31:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,L){e.next=5;break}c("warning","Please enter new deployment fee."),e.next=15;break;case 5:return fe(!0),e.next=8,a.setDeploymentFee(b.a.utils.parseEther(L));case 8:return t=e.sent,e.next=11,t.wait();case 11:1===e.sent.status?(fe(!1),c("success","Transaction successful!")):(fe(!1),c("error","Transaction failed!")),V(""),s(!0);case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),fe(!1),c("error",e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var r,s,c,i,o,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=27;break}return e.next=3,a.address;case 3:return r=e.sent,p(r),e.next=7,a.owner();case 7:return s=e.sent,m(s),s===t.address&&P(!0),e.next=12,a.getContractBalance();case 12:return c=e.sent,A(b.a.utils.formatEther(c)),e.next=16,a.getDeploymentFee();case 16:return i=e.sent,U(b.a.utils.formatEther(i)),e.next=20,F(s);case 20:return o=e.sent,d=o.did,g(d),e.next=25,n.store.get("basicProfile",o.did);case 25:void 0!==(l=e.sent)&&null!==l&&C(l);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]),Object(de.jsxs)("div",{className:"writer-contract-content",children:[Object(de.jsxs)("div",{className:"writer-contract-reads",children:[Object(de.jsx)(se.a,{title:t.address===f?"Owner (You)":"Owner",content:N?Object(de.jsx)(ce.a,{shadow:!0,marginTop:"0.5",width:"fit-content",children:Object(de.jsxs)("div",{className:"owner",children:[Object(de.jsxs)("div",{className:"owner-identicon-profile",children:[Object(de.jsx)("div",{className:"owner-identicon",children:Object(de.jsx)(te.a,{string:f,bg:"#eef",size:"40"})}),Object(de.jsxs)("div",{className:"owner-basic-profile",children:[Object(de.jsx)("div",{className:"owner-name",children:N.name?Object(de.jsx)(Z.a,{margin:"0",b:!0,children:N.name}):Object(de.jsx)(Z.a,{margin:"0",children:"--"})}),Object(de.jsx)("div",{className:"owner-description",children:Object(de.jsx)(Z.a,{margin:"0",children:N.description?N.description:"--"})}),Object(de.jsx)("div",{className:"owner-emoji",children:Object(de.jsx)(Z.a,{margin:"0",children:N.emoji?N.emoji:"--"})})]})]}),Object(de.jsxs)("div",{className:"owner-address-did",children:[Object(de.jsx)("div",{className:"owner-did",children:Object(de.jsx)(ie.a,{symbol:"DID",text:w,width:"400px",copy:"prevent"})}),Object(de.jsx)("div",{className:"owner-address",children:Object(de.jsx)(ie.a,{type:"lite",symbol:"Address",text:f,width:"400px"})})]})]})}):Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Contract",content:j?Object(de.jsx)(Ie.a,{href:"https://mumbai.polygonscan.com/address/".concat(j),target:"_blank",icon:!0,style:{color:"#7B3FE4",fontWeight:"bold"},children:"Polygonscan"}):Object(de.jsx)(Pe.a,{})}),Object(de.jsxs)("div",{className:"contract-balance-and-withdraw",children:[Object(de.jsx)(se.a,{title:"Contract Balance",content:B?B+" MATIC":Object(de.jsx)(Pe.a,{})}),D?Object(de.jsx)(de.Fragment,{children:re?Object(de.jsx)(Y.a,{type:"secondary",marginTop:"1rem",shadow:!0,loading:!0,auto:!0,scale:.8,children:"Widthdraw Balance"}):Object(de.jsx)(Y.a,{type:"secondary",marginTop:"1rem",shadow:!0,auto:!0,scale:.8,onClick:me,children:"Widthdraw Balance"})}):null]}),Object(de.jsx)(se.a,{title:"Deployment Fee",content:W?W+" MATIC":Object(de.jsx)(Pe.a,{})}),Object(de.jsxs)("div",{className:"writer-contract-read",children:[Object(de.jsx)(ae.a,{clearable:!0,onClearClick:function(){return $("")},type:"secondary",placeholder:"Writer Address: 0x0",onChange:function(e){return z(e.target.value)},width:"80%",children:"Get Deployed Contract Address"}),be?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,auto:!0,scale:.8,children:"Get Contract Address"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,auto:!0,scale:.8,onClick:ye,children:"Get Contract Address"}),X?Object(de.jsx)(ie.a,{type:"lite",symbol:"",text:X,width:"300px"}):null]})]}),Object(de.jsx)("div",{className:"writer-contract-writes",children:D?Object(de.jsxs)("div",{className:"writer-contract-write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"Deployment Fee: 0.006",onChange:function(e){return V(e.target.value)},width:"80%",children:"Change Deployment Fee (MATIC)"}),xe?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,auto:!0,scale:.8,children:"Change Fee"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,auto:!0,scale:.8,onClick:Oe,children:"Change Fee"})]}):null})]})}),Ae=(n(1630),n(1656)),Ee=n(1653),Re=function(e){var t=e.wallet,n=e.ceramic,a=e.writer,s=e.authSig,c=e.users,i=e.handleRerender,l=e.handleMessage,j=Object(r.useState)([]),p=Object(d.a)(j,2),h=p[0],x=p[1],f=Object(r.useState)([]),m=Object(d.a)(f,2),y=m[0],O=m[1],w=Object(r.useState)([]),g=Object(d.a)(w,2),v=(g[0],g[1]),k=Object(r.useState)([]),N=Object(d.a)(k,2),C=N[0],T=N[1],S=Object(r.useState)(!0),D=Object(d.a)(S,2),P=D[0],I=D[1],M=Object(r.useState)(!1),B=Object(d.a)(M,2),A=B[0],E=B[1],R=Object(r.useState)(!1),W=Object(d.a)(R,2),F=W[0],_=W[1],K=Object(r.useState)(!1),H=Object(d.a)(K,2),L=H[0],V=H[1],Q=Object(r.useState)(),X=Object(d.a)(Q,2),$=X[0],ee=X[1],ne=Object(r.useState)([]),re=Object(d.a)(ne,2),le=re[0],ue=re[1],be=Object(r.useState)(),je=Object(d.a)(be,2),pe=je[0],he=je[1],xe=Object(r.useState)(!1),fe=Object(d.a)(xe,2),me=fe[0],ye=fe[1],Oe=Object(r.useState)(),we=Object(d.a)(Oe,2),ve=we[0],ke=we[1],Se=Object(r.useState)(),De=Object(d.a)(Se,2),Me=De[0],Be=De[1],Re=Object(r.useState)(!1),We=Object(d.a)(Re,2),Ue=We[0],Fe=We[1],_e=Object(r.useState)("All Writers"),Ke=Object(d.a)(_e,2),qe=Ke[0],ze=Ke[1],Je=Object(r.useState)(!1),He=Object(d.a)(Je,2),Le=He[0],Ve=He[1],Ye=Object(r.useState)(!1),Ge=Object(d.a)(Ye,2),Ze=Ge[0],Qe=Ge[1],Xe=Object(r.useState)(!1),$e=Object(d.a)(Xe,2),et=$e[0],tt=$e[1],nt=function(){ee({}),E(!1),_(!1),V(!1),I(!0)},rt=function(e){ee(e),I(!1),_(!1),V(!1),E(!0)},at=function(){I(!1),E(!1),V(!1),_(!0)},st=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),E(!1),_(!1),V(!0),e.next=6,ot(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=Object(o.a)(u.a.mark((function e(r){var a,s,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,pe){e.next=5;break}l("warning","Please enter no. of tokens."),e.next=37;break;case 5:if(!(Number(pe)<=0)){e.next=9;break}l("warning","No. of tokens should be atleast 1."),e.next=37;break;case 9:return ye(!0),e.next=12,r.writerERC20.getTokenPrice();case 12:return a=e.sent,a=String(a*pe),e.next=16,r.writerERC20.mint(Number(pe),{value:a});case 16:return s=e.sent,e.next=19,s.wait();case 19:return 1===e.sent.status?(l("success","Transaction successful!"),l("success","Updating user on threadDB...")):(ye(!1),l("error","Transaction failed!")),e.next=23,r.writerERC20.balanceOf(t.address);case 23:if(c=e.sent,o=r.accessControlConditions[0].returnValueTest.value,!(Number(c)>=Number(o))){e.next=30;break}return e.next=28,q(r.did,n.did);case 28:e.next=32;break;case 30:return e.next=32,z(r.did,n.did);case 32:l("success","User updated on threadDB!"),ye(!1),he(""),i(!0),nt();case 37:e.next=44;break;case 39:e.prev=39,e.t0=e.catch(0),console.log(e.t0),ye(!1),l("error",e.t0.message);case 44:case"end":return e.stop()}}),e,null,[[0,39]])})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(o.a)(u.a.mark((function e(r){var a,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ve){e.next=5;break}l("warning","Please enter transfer address."),e.next=42;break;case 5:if(b.a.utils.isAddress(ve)){e.next=9;break}l("warning","Please enter valid address."),e.next=42;break;case 9:if(Me){e.next=13;break}l("warning","Please enter no. of tokens"),e.next=42;break;case 13:if(!(Number(Me)<=0)){e.next=17;break}l("warning","No. of tokens should be atleast 1."),e.next=42;break;case 17:return Fe(!0),e.next=20,r.writerERC20.transfer(ve,Number(Me));case 20:return a=e.sent,e.next=23,a.wait();case 23:return 1===e.sent.status?(l("success","Transaction successful!"),l("success","Updating user on threadDB...")):(Fe(!1),l("error","Transaction failed!")),e.next=27,r.writerERC20.balanceOf(t.address);case 27:if(s=e.sent,c=r.accessControlConditions[0].returnValueTest.value,!(Number(s)>=Number(c))){e.next=34;break}return e.next=32,q(r.did,n.did);case 32:e.next=36;break;case 34:return e.next=36,z(r.did,n.did);case 36:l("success","User updated on threadDB!"),Fe(!1),ke(""),Be(""),i(!0),nt();case 42:e.next=49;break;case 44:e.prev=44,e.t0=e.catch(0),console.log(e.t0),Fe(!1),l("error",e.t0.message);case 49:case"end":return e.stop()}}),e,null,[[0,44]])})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ue([]),Qe(!1),tt(!0),!(t.accessControlConditions&&t.encryptedSymmetricKey&&t.encryptedPosts)){e.next=13;break}if(null===t.encryptedPosts||null===t.encryptedSymmetricKey||null===t.accessControlConditions){e.next=13;break}return n=Object(ge.c)(t.encryptedPosts),e.next=9,Object(ge.a)(n,t.encryptedSymmetricKey,t.accessControlConditions,s);case 9:r=e.sent,ue(JSON.parse(r.decryptedPosts)),Qe(!0),tt(!1);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),"not_authorized"===e.t0.message&&(tt(!1),void 0===alert("You are not authorized to access this content.")&&rt($));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),dt=function(e){return Object(de.jsx)(de.Fragment,{children:!P||A||F||L?!P&&A&&void 0!==$?Object(de.jsx)("div",{className:"profile-content",children:Object(de.jsx)(ce.a,{style:{backgroundColor:$.address===t.address?"#eef":""},shadow:!0,width:"100%",children:Object(de.jsxs)("div",{className:"writer",children:[Object(de.jsxs)("div",{className:"breadcrumbs-writer-card-top-right",children:[Object(de.jsx)("div",{className:"breadcrumbs",children:Object(de.jsxs)(Ee.a,{children:[Object(de.jsx)(Ee.a.Item,{href:"#",onClick:nt,children:qe}),Object(de.jsx)(Ee.a.Item,{children:"Writer"})]})}),Object(de.jsxs)("div",{className:"writer-card-top-right",children:[Object(de.jsxs)(Ae.a.Anchor,{children:[Object(de.jsx)(Ae.a,{scale:.8,marginBottom:"0",style:{backgroundColor:"darkgreen"},children:$.totalSubscribedBy>1e3?"1k+":$.totalSubscribedBy}),Object(de.jsx)(oe.a,{type:"dark",scale:.9,marginTop:"0.3",children:"Subscribers"})]}),"owner"===$.loggedInUserIsSubscribed?null:"yes"===$.loggedInUserIsSubscribed?Object(de.jsx)(Ae.a.Anchor,{children:Object(de.jsx)(oe.a,{style:{backgroundColor:"darkgreen",color:"white"},scale:.9,children:"Subscribed"})}):"no"===$.loggedInUserIsSubscribed?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,auto:!0,className:"btn",onClick:function(){return at()},scale:.8,children:"Subscribe"}):null]})]}),Object(de.jsxs)("div",{className:"writer-details-profile",children:[Object(de.jsxs)("div",{className:"writer-identicon-profile",children:[Object(de.jsx)("div",{className:"writer-identicon",children:Object(de.jsx)(te.a,{string:$.address,bg:$.address===t.address?"#fff":"#eef",size:"40"})}),Object(de.jsxs)("div",{className:"writer-basic-profile",children:[Object(de.jsx)("div",{className:"writer-name",children:$.name?Object(de.jsx)(Z.a,{margin:"0",b:!0,children:$.name}):Object(de.jsx)(Z.a,{margin:"0",children:"--"})}),Object(de.jsx)("div",{className:"writer-description",children:Object(de.jsx)(Z.a,{margin:"0",children:$.description?$.description:"--"})}),Object(de.jsx)("div",{className:"writer-emoji",children:Object(de.jsx)(Z.a,{margin:"0",children:$.emoji?$.emoji:"--"})})]})]}),Object(de.jsxs)("div",{className:"writer-address-did",children:[Object(de.jsx)("div",{className:"writer-did",children:Object(de.jsx)(ie.a,{symbol:"DID",text:$.did,width:"400px",copy:"prevent"})}),Object(de.jsx)("div",{className:"writer-address",children:Object(de.jsx)(ie.a,{type:"lite",symbol:"Address",text:$.address,width:"400px"})})]})]}),Object(de.jsxs)("div",{className:"view-read-contract",children:[Object(de.jsx)(Ie.a,{href:"#",icon:!0,onClick:function(){return st($)},children:"Read Blog"}),"owner"!==$.loggedInUserIsSubscribed?Object(de.jsx)(Ie.a,{href:"#",icon:!0,onClick:function(){return at()},children:"Contract"}):null]})]})},$.address)}):P||A||!F||void 0===$?P||A||F||!L||void 0===$?null:Object(de.jsx)("div",{className:"read-content",children:Object(de.jsx)(ce.a,{shadow:!0,width:"100%",children:Object(de.jsxs)("div",{className:"read-card-items",children:[Object(de.jsx)("div",{className:"breadcrumbs",children:Object(de.jsxs)(Ee.a,{children:[Object(de.jsx)(Ee.a.Item,{href:"#",onClick:nt,children:qe}),Object(de.jsx)(Ee.a.Item,{href:"#",onClick:function(){return rt($)},children:"Writer"}),Object(de.jsx)(Ee.a.Item,{children:"Read"})]})}),Object(de.jsx)("div",{className:"read-blog-posts",children:le.length<=0?et?Object(de.jsx)(Pe.a,{}):Ze?$.address===t.address?Object(de.jsxs)(G.a,{width:"fit-content",label:"Note ",children:["You have not published any posts yet! To publish your first post, head over to ",Object(de.jsx)("b",{children:"Write"})," ","section."]}):Object(de.jsx)(G.a,{width:"fit-content",label:"Info ",children:"Looks like the writer has not published anything yet! Come back again later."}):null:le.map((function(e){return Object(de.jsxs)(ce.a,{shadow:!0,width:"100%",children:[Object(de.jsx)(ce.a.Content,{children:Ne(e.data.blocks)}),Object(de.jsx)(ce.a.Footer,{children:Object(de.jsx)(Z.a,{i:!0,children:Ce(e.data.time)})})]},e.id)}))})]})},$.address)}):Object(de.jsx)("div",{className:"contract-content",children:Object(de.jsx)(ce.a,{shadow:!0,width:"100%",children:Object(de.jsxs)("div",{className:"contract-card-items",children:[Object(de.jsx)("div",{className:"breadcrumbs",children:Object(de.jsxs)(Ee.a,{children:[Object(de.jsx)(Ee.a.Item,{href:"#",onClick:nt,children:qe}),Object(de.jsx)(Ee.a.Item,{href:"#",onClick:function(){return rt($)},children:"Writer"}),Object(de.jsx)(Ee.a.Item,{children:"Contract"})]})}),Object(de.jsx)("div",{className:"contract-note",children:"no"===$.loggedInUserIsSubscribed?Object(de.jsxs)(G.a,{width:"fit-content",type:"error",label:"Note ",children:["Looks like you are short of"," ",$.writerRequiredNoOfTokensToAccess-$.loggedInUserBalanceOfWriterToken," ",$.tokenSymbol," Tokens. Mint atleast"," ",$.writerRequiredNoOfTokensToAccess-$.loggedInUserBalanceOfWriterToken," ",$.tokenSymbol," tokens below to get subscribed to the writer."]}):Object(de.jsxs)(G.a,{width:"fit-content",label:"Info ",children:["Here you can mint ",$.tokenSymbol," tokens to get subscribed to the writer and also transfer them to other addresses."]})}),Object(de.jsxs)("div",{className:"token-reads-and-writes",children:[Object(de.jsxs)("div",{className:"token-reads",children:[Object(de.jsx)(se.a,{title:"Contract",content:$.contractAddress?Object(de.jsx)(Ie.a,{href:"https://mumbai.polygonscan.com/address/".concat($.contractAddress),target:"_blank",icon:!0,style:{color:"#7B3FE4",fontWeight:"bold"},children:"Polygonscan"}):Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Name",content:$.tokenName?$.tokenName:Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Symbol",content:$.tokenSymbol?$.tokenSymbol:Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Price",content:$.tokenPrice?$.tokenPrice+" MATIC":Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Min tokens required",content:$.writerRequiredNoOfTokensToAccess?$.writerRequiredNoOfTokensToAccess:Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Your Token Balance",content:$.loggedInUserBalanceOfWriterToken})]}),Object(de.jsxs)("div",{className:"token-writes",children:[Object(de.jsxs)("div",{className:"token-write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"No. of tokens: 1000",onChange:function(e){return he(e.target.value)},width:"80%",children:"Mint New Tokens"}),me?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Mint"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",scale:.8,onClick:function(){return ct($)},children:"Mint"})]}),Object(de.jsxs)("div",{className:"token-write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"To Address: 0x0",onChange:function(e){return ke(e.target.value)},width:"80%",children:"Transfer Tokens"}),Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"No.of tokens: 30",onChange:function(e){return Be(e.target.value)},width:"80%"}),Ue?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Transfer"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",scale:.8,onClick:function(){return it($)},children:"Transfer"})]})]})]})]})},$.address)}):Object(de.jsx)("div",{className:"all-writers",children:e.length<1?Object(de.jsx)(Pe.a,{}):Object(de.jsx)(de.Fragment,{children:Object(de.jsx)("div",{className:"all-writers-cards",children:e.map((function(e){if(e)return Object(de.jsx)(ce.a,{type:"lite",style:{backgroundColor:e.address===t.address?"#eef":""},shadow:!0,width:"100%",children:Object(de.jsxs)("div",{className:"writer",children:[Object(de.jsxs)("div",{className:"writer-details-all",children:[Object(de.jsxs)("div",{className:"writer-identicon-profile",children:[Object(de.jsx)("div",{className:"writer-identicon",children:Object(de.jsx)(te.a,{string:e.address,bg:e.address===t.address?"#fff":"#eef",size:"40"})}),Object(de.jsxs)("div",{className:"writer-basic-profile",children:[Object(de.jsx)("div",{className:"writer-name",children:e.name?Object(de.jsx)(Z.a,{margin:"0",b:!0,children:e.name}):Object(de.jsx)(Z.a,{margin:"0",children:"--"})}),Object(de.jsx)("div",{className:"writer-description",children:Object(de.jsx)(Z.a,{margin:"0",children:e.description?e.description:"--"})}),Object(de.jsx)("div",{className:"writer-emoji",children:Object(de.jsx)(Z.a,{margin:"0",children:e.emoji?e.emoji:"--"})})]})]}),Object(de.jsx)("div",{className:"writer-card-top-right",children:Object(de.jsxs)(Ae.a.Anchor,{children:[Object(de.jsx)(Ae.a,{scale:.8,marginBottom:"0.7",style:{backgroundColor:"darkgreen"},children:e.subscribedBy.length>1e3?"1k+":e.subscribedBy.length}),Object(de.jsx)(oe.a,{type:"dark",scale:.8,children:"Subscribers"})]})})]}),Object(de.jsxs)("div",{className:"writer-address-did",children:[Object(de.jsx)("div",{className:"writer-did",children:Object(de.jsx)(ie.a,{symbol:"DID",text:e.did,width:"400px",copy:"prevent"})}),Object(de.jsx)("div",{className:"writer-address",children:Object(de.jsx)(ie.a,{type:"lite",symbol:"Address",text:e.address,width:"400px"})})]}),Object(de.jsx)("div",{className:"view-profile",children:Object(de.jsx)(Ie.a,{href:"#",icon:!0,onClick:function(){return rt(e)},children:e.address===t.address?"Your Profile":"View Profile"})})]})},e.address)}))})})})})};return Object(r.useEffect)((function(){function e(){return e=Object(o.a)(u.a.mark((function e(){var r,s,i,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a||void 0===c){e.next=15;break}return r=c.filter((function(e){return""!==e.deployedContractAddress&&e.deployedContractAddress!==b.a.constants.AddressZero})),e.next=4,Promise.all(r.map(function(){var e=Object(o.a)(u.a.mark((function e(r){var a,s,c,i,o,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.store.get("writerData",r.did);case 2:if(void 0===(a=e.sent)||null===a){e.next=50;break}if(void 0===a.accessControlConditions||null===a.accessControlConditions[0]){e.next=50;break}return s={address:r.address,did:r.did,contractAddress:r.deployedContractAddress},r.address===t.address&&Ve(!0),void 0!==a.encryptedPosts&&null!==a.encryptedPosts[0]&&(s.encryptedPosts=a.encryptedPosts[0]),void 0!==a.encryptedSymmetricKey&&null!==a.encryptedSymmetricKey[0]&&(s.encryptedSymmetricKey=a.encryptedSymmetricKey[0]),s.accessControlConditions=a.accessControlConditions[0],e.next=12,n.store.get("basicProfile",r.did);case 12:return void 0!==(c=e.sent)&&null!==c&&(s.name=c.name,s.description=c.description,s.emoji=c.emoji),i=new b.a.Contract(r.deployedContractAddress,J.writerERC20,t.signer),s.writerERC20=i,e.next=18,i.name();case 18:return s.tokenName=e.sent,e.next=21,i.symbol();case 21:return s.tokenSymbol=e.sent,e.t0=b.a.utils,e.next=25,i.getTokenPrice();case 25:return e.t1=e.sent,s.tokenPrice=e.t0.formatEther.call(e.t0,e.t1),e.next=29,i.balanceOf(t.address);case 29:if(o=e.sent,s.loggedInUserBalanceOfWriterToken=Number(o),d=a.accessControlConditions[0][0].returnValueTest.value,s.writerRequiredNoOfTokensToAccess=Number(d),!(Number(o)>=Number(d))){e.next=39;break}return e.next=36,q(r.did,n.did);case 36:r.did===n.did?s.loggedInUserIsSubscribed="owner":s.loggedInUserIsSubscribed="yes",e.next=42;break;case 39:return e.next=41,z(r.did,n.did);case 41:s.loggedInUserIsSubscribed="no";case 42:return e.next=44,U(r.did);case 44:return l=e.sent,s.totalSubscribedBy=l.subscribedBy.length,s.totalSubscribedTo=l.subscribedTo.length,s.subscribedBy=l.subscribedBy,s.subscribedTo=l.subscribedTo,e.abrupt("return",s);case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:if(s=e.sent,x(s),i=s.filter((function(e){return void 0!==e?e.subscribedBy.includes(n.did):null})),O(i),d=s.filter((function(e){return void 0!==e?e.did===n.did:null})),v(d),!d[0]){e.next=15;break}return e.next=13,Promise.all(d[0].subscribedBy.map(function(){var e=Object(o.a)(u.a.mark((function e(t){var r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={did:t},e.next=3,U(t);case 3:return a=e.sent,r.address=a.address,e.next=7,n.store.get("basicProfile",t);case 7:return void 0!==(s=e.sent)&&null!==s&&(r.name=s.name,r.description=s.description,r.emoji=s.emoji),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:l=e.sent,T(l);case 15:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,c,$]),Object(de.jsx)("div",{className:"writers",children:Object(de.jsxs)(Te.a.Group,{value:"All Writers",onChange:function(e){ze(e),"My Subscribers"===e?(ee({}),I(!1),E(!1),_(!1),V(!1)):nt()},children:[Object(de.jsx)(Te.a,{label:"All Writers",paddingRight:"2.6",children:dt(h)}),Object(de.jsx)(Te.a,{label:"My Subscriptions",paddingRight:"2.6",children:y.length<1?Object(de.jsx)(G.a,{width:"fit-content",label:"Info ",children:"You are not subscribed to any writers yet."}):dt(y)}),Le?Object(de.jsx)(Te.a,{label:"My Subscribers",paddingRight:"2.6",children:Object(de.jsx)("div",{className:"my-subscribers",children:C.length<1?Object(de.jsx)(G.a,{width:"fit-content",label:"Info ",children:"You have zero subscribers."}):Object(de.jsx)("div",{className:"my-subscribers-cards",children:C.map((function(e){if(e)return Object(de.jsx)(ce.a,{type:"lite",style:{backgroundColor:e.address===t.address?"#eef":""},shadow:!0,width:"100%",children:Object(de.jsxs)("div",{className:"writer",children:[Object(de.jsx)("div",{className:"writer-details-all",children:Object(de.jsxs)("div",{className:"writer-identicon-profile",children:[Object(de.jsx)("div",{className:"writer-identicon",children:Object(de.jsx)(te.a,{string:e.address,bg:e.address===t.address?"#fff":"#eef",size:"40"})}),Object(de.jsxs)("div",{className:"writer-basic-profile",children:[Object(de.jsx)("div",{className:"writer-name",children:e.name?Object(de.jsx)(Z.a,{margin:"0",b:!0,children:e.name}):Object(de.jsx)(Z.a,{margin:"0",children:"--"})}),Object(de.jsx)("div",{className:"writer-description",children:Object(de.jsx)(Z.a,{margin:"0",children:e.description?e.description:"--"})}),Object(de.jsx)("div",{className:"writer-emoji",children:Object(de.jsx)(Z.a,{margin:"0",children:e.emoji?e.emoji:"--"})})]})]})}),Object(de.jsxs)("div",{className:"writer-address-did",children:[Object(de.jsx)("div",{className:"writer-did",children:Object(de.jsx)(ie.a,{symbol:"DID",text:e.did,width:"400px",copy:"prevent"})}),Object(de.jsx)("div",{className:"writer-address",children:Object(de.jsx)(ie.a,{type:"lite",symbol:"Address",text:e.address,width:"400px"})})]})]})},e.address)}))})})}):null]})})},We=(n(1631),function(e){var t=e.wallet,n=e.ceramic,a=e.writer,s=e.authSig,c=(e.user,e.handleRerender),i=e.handleMessage,l=Object(r.useState)(!1),j=Object(d.a)(l,2),p=j[0],h=j[1],x=Object(r.useState)(""),f=Object(d.a)(x,2),m=f[0],y=f[1],O=Object(r.useState)(),w=Object(d.a)(O,2),g=(w[0],w[1]),v=Object(r.useState)(""),k=Object(d.a)(v,2),N=k[0],C=k[1],T=Object(r.useState)(""),S=Object(d.a)(T,2),D=S[0],P=S[1],I=Object(r.useState)(""),M=Object(d.a)(I,2),B=M[0],A=M[1],E=Object(r.useState)(""),R=Object(d.a)(E,2),W=R[0],U=R[1],F=Object(r.useState)(!1),_=Object(d.a)(F,2),K=_[0],q=_[1],z=function(){var e=Object(o.a)(u.a.mark((function e(){var r,a,o,d,l,b,j,p,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,W){e.next=5;break}i("warning","Please enter min no. of tokens."),e.next=40;break;case 5:if(0!==Number(W)){e.next=9;break}i("warning","Min no. of tokens required should be atleast 1."),e.next=40;break;case 9:return q(!0),r=[{contractAddress:m,standardContractType:"ERC20",chain:"mumbai",method:"balanceOf",parameters:[":userAddress"],returnValueTest:{comparator:">=",value:W}},{operator:"or"},{contractAddress:"",standardContractType:"",chain:"mumbai",method:"",parameters:[":userAddress"],returnValueTest:{comparator:"=",value:t.address}}],e.next=13,n.store.get("writerData",n.did);case 13:if(void 0===(a=e.sent)||null===a){e.next=34;break}if(!(a.accessControlConditions&&a.encryptedSymmetricKey&&a.encryptedPosts)){e.next=34;break}if(!(null!==a.encryptedPosts&&a.encryptedPosts[0]&&null!==a.encryptedSymmetricKey&&a.encryptedSymmetricKey[0]&&null!==a.accessControlConditions&&a.accessControlConditions[0])){e.next=34;break}return o=Object(ge.c)(a.encryptedPosts[0]),e.next=20,Object(ge.a)(o,a.encryptedSymmetricKey[0],a.accessControlConditions[0],s);case 20:return d=e.sent,l=d.decryptedPosts,e.next=24,Object(ge.b)(l,r,s);case 24:return b=e.sent,j=b.encryptedPosts,p=b.encryptedSymmetricKey,e.next=29,Object(ge.d)(j);case 29:return h=e.sent,e.next=32,n.store.merge("writerData",{encryptedPosts:[h]});case 32:return e.next=34,n.store.merge("writerData",{encryptedSymmetricKey:[p]});case 34:return e.next=36,n.store.merge("writerData",{accessControlConditions:[r]});case 36:i("success","New min no. of tokens required successfully updated."),q(!1),U(""),c(!0);case 40:e.next=47;break;case 42:e.prev=42,e.t0=e.catch(0),console.log(e.t0),q(!1),i("error",e.t0.message);case 47:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){var r,s,c,i,o,d,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=24;break}return e.next=3,a.getHasWriterDeployed(t.address);case 3:if(!e.sent){e.next=24;break}return h(!0),e.next=8,a.getWriterDeployedContractAddress(t.address);case 8:return r=e.sent,y(r),s=new b.a.Contract(r,J.writerERC20,t.signer),g(s),e.next=14,s.name();case 14:return c=e.sent,C(c),e.next=18,s.symbol();case 18:return i=e.sent,P(i),e.next=22,n.store.get("writerData",n.did);case 22:void 0!==(o=e.sent)&&null!==o?(d=o.accessControlConditions[0],l=d[0].returnValueTest.value,A(l)):A("not set");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a]),Object(de.jsx)("div",{className:"access-control-content",children:p?Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(G.a,{width:"fit-content",label:"Info ",children:"Here you can set the minimum no. of your tokens a reader must own in order to read your blog."}),Object(de.jsxs)("div",{className:"user-access-control-content",children:[Object(de.jsxs)("div",{className:"access-control-reads",children:[Object(de.jsx)(se.a,{title:"Token Name",content:N||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Token Symbol",content:D||Object(de.jsx)(Pe.a,{})}),Object(de.jsx)(se.a,{title:"Current Min no. Of tokens required",content:B?"not set"===B?"--":B:Object(de.jsx)(Pe.a,{})})]}),Object(de.jsx)("div",{className:"access-contrl-writes",children:Object(de.jsxs)("div",{className:"access-contrl-write",children:[Object(de.jsx)(ae.a,{clearable:!0,type:"secondary",placeholder:"No. of tokens: 5",onChange:function(e){return U(e.target.value)},width:"80%",children:"Set New Min No. of Tokens Required"}),K?Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,loading:!0,className:"btn",scale:.8,children:"Set New Min No. of Tokens"}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,className:"btn",auto:!0,scale:.8,onClick:z,children:"Set New Min No. of Tokens"})]})})]})]}):Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(G.a,{width:"fit-content",label:"Note ",children:["In order to set access control condition to your blog, you must first deploy an ERC20 contract (WriterERC20). To do that, head over to ",Object(de.jsx)("b",{children:"My Contract"})," section."]})})})}),Ue=function(){var e=Object(V.a)({placement:"bottomRight",padding:"1rem"}).setToast,t=function(t,n){e({type:t,text:n,delay:6e3})},n=Object(r.useState)(),a=Object(d.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(!1),l=Object(d.a)(i,2),j=l[0],p=l[1],h=Object(r.useState)(),y=Object(d.a)(h,2),w=y[0],g=y[1],v=Object(r.useState)(!1),k=Object(d.a)(v,2),N=k[0],C=k[1],T=Object(r.useState)(!1),S=Object(d.a)(T,2),D=S[0],P=S[1],M=Object(r.useState)(),B=Object(d.a)(M,2),A=B[0],R=B[1],F=Object(r.useState)(),q=Object(d.a)(F,2),z=q[0],ee=q[1],te=Object(r.useState)(),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],se=Object(r.useState)(),ce=Object(d.a)(se,2),ie=ce[0],oe=ce[1],ue=Object(r.useState)(!1),be=Object(d.a)(ue,2),je=be[0],pe=be[1],he=Object(r.useState)(!1),xe=Object(d.a)(he,2),fe=xe[0],me=xe[1];Object(r.useEffect)((function(){x.cachedProvider&&Oe()}),[fe]);var ye=function(e){me(e)},Oe=Object(r.useCallback)(Object(o.a)(u.a.mark((function e(){var n,r,a,s,i,o,d,l,j,h,x,y,w,v,k,N,T,S,D,M,B,A,F;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:if(n=e.sent,r=n.provider,a=n.injectedProvider,s=n.signer,i=n.address,o=n.balance,d=n.chainID,c(l={provider:r,injectedProvider:a,signer:s,address:i,balance:o,chainID:d}),p(!0),80001===l.chainID){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,I(r,i);case 17:return j=e.sent,h=j.ceramicClient,x=j.did,y=j.store,w=j.basicProfile,g({client:h,did:x,store:y,basicProfile:w}),C(!0),e.next=27,E(s,i);case 27:return P(!0),e.next=30,U(x);case 30:if(v=e.sent){e.next=38;break}return e.next=34,W(i,x);case 34:return e.next=36,U(x);case 36:k=e.sent,R(k);case 38:return R(v),N=new b.a.Contract(H.writer,J.writer,s),ae(N),e.next=43,N.getHasWriterDeployed(i);case 43:if(!e.sent){e.next=50;break}return e.next=47,N.getWriterDeployedContractAddress(i);case 47:return T=e.sent,e.next=50,K(x,T);case 50:return e.next=52,_();case 52:return S=e.sent,ee(S),D=new O.a.LitNodeClient({alertWhenUnauthorized:!1}),e.next=57,D.connect();case 57:return window.litNodeClient=D,e.next=60,O.a.checkAndSignAuthMessage({chain:"mumbai"});case 60:M=e.sent,oe(M),pe(!0),e.next=82;break;case 65:if(e.prev=65,e.t0=e.catch(0),console.log(e.t0),"Textile Auth Expired!"!==e.t0.message&&"Bad API key signature"!==e.t0.message){e.next=80;break}return t("secondary","Textile Auth expired! Reconnect your wallet."),e.next=72,m();case 72:B=e.sent,A=B.threadDBDisconnected,F=B.walletDisconnected,A&&P(!1),C(!1),F&&p(!1),e.next=82;break;case 80:console.log(e.t0),t("error",e.t0.message);case 82:case"end":return e.stop()}}),e,null,[[0,65]])}))),[]);return Object(de.jsxs)("div",{className:"wrapper",children:[Object(de.jsxs)("div",{className:"header",children:[Object(de.jsx)("div",{className:"heading",children:Object(de.jsx)("img",{className:"logo",src:L,width:"130",alt:"0xWriter logo"})}),Object(de.jsx)("div",{className:"connect-buttons",children:j?Object(de.jsx)(de.Fragment,{children:Object(de.jsx)(Y.a,{type:"secondary",ghost:!0,scale:.8,auto:!0,onClick:Object(o.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,n=t.threadDBDisconnected,r=t.litDisconnected,a=t.walletDisconnected,n&&P(!1),C(!1),r&&pe(!1),a&&p(!1);case 10:case"end":return e.stop()}}),e)}))),children:"Disconnect Wallet"})}):Object(de.jsx)(Y.a,{type:"secondary",shadow:!0,scale:.8,auto:!0,onClick:Oe,children:"Connect Wallet"})})]}),Object(de.jsx)("div",{className:"content",children:j?80001!==s.chainID?Object(de.jsx)(G.a,{width:"fit-content",margin:"auto",marginTop:"1rem",label:"Note ",children:"Please connect to Mumbai Testnet."}):N?D?je?Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(X.a,{initialValue:"1",hideDivider:!0,align:"center",children:[Object(de.jsxs)(X.a.Item,{label:"Home",value:"1",children:[Object(de.jsx)($.a,{h:2}),Object(de.jsx)(le,{wallet:s,ceramic:w,handleRerender:ye,handleMessage:t})]}),Object(de.jsxs)(X.a.Item,{label:"My Contract",value:"2",children:[Object(de.jsx)($.a,{h:2}),Object(de.jsx)(Me,{wallet:s,ceramic:w,writer:re,handleRerender:ye,handleMessage:t})]}),Object(de.jsxs)(X.a.Item,{label:"Access Control",value:"3",children:[Object(de.jsx)($.a,{h:2}),Object(de.jsx)(We,{wallet:s,ceramic:w,writer:re,authSig:ie,user:A,handleRerender:ye,handleMessage:t})]}),Object(de.jsxs)(X.a.Item,{label:"Write",value:"4",children:[Object(de.jsx)($.a,{h:1}),Object(de.jsx)(De,{wallet:s,ceramic:w,writer:re,authSig:ie,handleRerender:ye,handleMessage:t})]}),Object(de.jsxs)(X.a.Item,{label:"Read",value:"5",children:[Object(de.jsx)($.a,{h:2}),Object(de.jsx)(Re,{wallet:s,ceramic:w,writer:re,authSig:ie,users:z,handleRerender:ye,handleMessage:t})]}),Object(de.jsxs)(X.a.Item,{label:"0xWriter Contract",value:"6",children:[Object(de.jsx)($.a,{h:2}),Object(de.jsx)(Be,{wallet:s,ceramic:w,writer:re,handleRerender:ye,handleMessage:t})]})]})}):Object(de.jsx)(Q.a,{type:"secondary",spaceRatio:2.5,marginTop:"1rem",children:"Connecting to lit protocol"}):Object(de.jsx)(Q.a,{type:"secondary",spaceRatio:2.5,marginTop:"1rem",children:"Connecting to textile threadDB"}):Object(de.jsx)(Q.a,{type:"secondary",spaceRatio:2.5,marginTop:"1rem",children:"Connecting to ceramic network"}):Object(de.jsx)(de.Fragment,{children:Object(de.jsxs)(G.a,{label:!1,type:"default",marginTop:"1rem",children:[Object(de.jsx)(Z.a,{b:!0,children:"Welcome to 0xWriter \ud83d\udc4b"}),Object(de.jsx)(Z.a,{children:"Connect your wallet to get started!"})]})})})]})};window.ethereum&&window.ethereum.on("chainChanged",(function(e){x.cachedProvider&&setTimeout((function(){window.location.reload()}),1e3)})),window.ethereum&&window.ethereum.on("accountsChanged",function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=6;break}return null!==JSON.parse(localStorage.getItem("payload"))&&localStorage.removeItem("payload"),e.next=5,x.clearCachedProvider();case 5:setTimeout((function(){window.location.reload()}),1e3);case 6:x.cachedProvider&&setTimeout((function(){window.location.reload()}),1e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s.a.createRoot(document.getElementById("root")).render(Object(de.jsxs)(c.a,{children:[Object(de.jsx)(i.a,{}),Object(de.jsx)(Ue,{})]}))},188:function(e){e.exports=JSON.parse('{"writer":[{"inputs":[{"internalType":"uint256","name":"_deploymentFee","type":"uint256"},{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"writerAddress","type":"address"},{"indexed":true,"internalType":"string","name":"writerDID","type":"string"},{"indexed":true,"internalType":"address","name":"writerDeployedContractAddress","type":"address"}],"name":"LogNewDeployment","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"newDeploymentFee","type":"uint256"}],"name":"LogNewDeploymentFee","type":"event"},{"inputs":[{"internalType":"string","name":"_did","type":"string"},{"internalType":"string","name":"_tokenName","type":"string"},{"internalType":"string","name":"_tokenSymbol","type":"string"},{"internalType":"uint256","name":"_tokenPrice","type":"uint256"},{"internalType":"uint256","name":"_initialMintTokenAmount","type":"uint256"}],"name":"deployWriterERC20Contract","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeploymentFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getHasWriterDeployed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getWriterDeployedContractAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getWriters","outputs":[{"components":[{"internalType":"address","name":"writerAddress","type":"address"},{"internalType":"string","name":"writerDID","type":"string"},{"internalType":"address","name":"writerDeployedContractAddress","type":"address"}],"internalType":"struct Writer.Writerr[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newDeploymentFee","type":"uint256"}],"name":"setDeploymentFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawBalance","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}],"writerERC20":[{"inputs":[{"internalType":"string","name":"_tokenName","type":"string"},{"internalType":"string","name":"_tokenSymbol","type":"string"},{"internalType":"uint256","name":"_tokenPrice","type":"uint256"},{"internalType":"uint256","name":"_initialMintTokenAmount","type":"uint256"},{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTokenPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newTokenPrice","type":"uint256"}],"name":"setTokenPrice","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawBalance","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]}')},671:function(e,t){},774:function(e){e.exports=JSON.parse('{"definitions":{"basicProfile":"kjzl6cwe1jw145v2zsdl7dy2bb4x61jxly6ixrl46dedwdh0tulrk69itilp5xh","writerData":"kjzl6cwe1jw14bj4b55agxcinvjf66ew53q9bglmds8clu36jm50ocj414l6y6k"},"schemas":{"WriterData":"ceramic://k3y52l7qbv1frxi247gynugnuh8yndtbyrm1ogfzgoj85awfpqoviuiqpnqbi4oow","BasicProfile":"ceramic://k3y52l7qbv1frypcc6ddlytdoioxt9i7rm28r3uty0wqo7ohvui6vwaff0ggx2xvk"},"tiles":{}}')},783:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(7),a=n(0),s=n.n(a),c=n(1633).io,i=function(t){return new Promise((function(n,a){var i=c("https://writer-auth.herokuapp.com/");i.on("connect",(function(){var c=t.public.toString();i.emit("initializeAuthentication",JSON.stringify({type:"token",publicKey:c})),i.on("initializeAuthenticationResponse",function(){var c=Object(r.a)(s.a.mark((function r(c){var o,d,l;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=JSON.parse(c),r.t0=o.type,r.next="error"===r.t0?4:"challenge"===r.t0?6:"token"===r.t0?12:15;break;case 4:case 15:return a(o.value),r.abrupt("break",17);case 6:return d=e.from(o.value),r.next=9,t.sign(d);case 9:return l=r.sent,i.emit("challengeResponse",l),r.abrupt("break",17);case 12:return n(o.value),i.disconnect(),r.abrupt("break",17);case 17:case"end":return r.stop()}}),r)})));return function(e){return c.apply(this,arguments)}}())}))}))}}).call(this,n(25).Buffer)},785:function(e){e.exports=JSON.parse('{"writer":"0xeEDc52b142FED56c675D7157f6C7F4f91aad33b0"}')},810:function(e,t){},847:function(e,t){},849:function(e,t){},874:function(e,t){},876:function(e,t){},888:function(e,t){},889:function(e,t){},912:function(e,t){},914:function(e,t){},916:function(e,t){},93:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var r=n(7),a=n(0),s=n.n(a),c=n(218),i=n.n(c),o=function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onloadend=function(){return e(r.result.replace("data:application/octet-stream;base64,",""))},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(t){var n,r=(n=t,new Uint8Array(e.from(n,"base64")));return new Blob([r],{type:"application/octet-stream"})},l=function(){var e=Object(r.a)(s.a.mark((function e(t,n,r){var a,c,o,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.encryptString(t);case 3:return a=e.sent,c=a.encryptedString,o=a.symmetricKey,e.next=8,window.litNodeClient.saveEncryptionKey({accessControlConditions:n,symmetricKey:o,authSig:r,chain:"mumbai"});case 8:return d=e.sent,e.abrupt("return",{encryptedPosts:c,encryptedSymmetricKey:i.a.uint8arrayToString(d,"base16")});case 12:throw e.prev=12,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(s.a.mark((function e(t,n,r,a){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.litNodeClient.getEncryptionKey({accessControlConditions:r,toDecrypt:n,chain:"mumbai",authSig:a});case 3:return c=e.sent,e.next=6,i.a.decryptString(t,c);case 6:return o=e.sent,e.abrupt("return",{decryptedPosts:o});case 10:throw e.prev=10,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0.errorCode);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()}).call(this,n(25).Buffer)}},[[1632,1,2]]]);
//# sourceMappingURL=main.3495985f.chunk.js.map